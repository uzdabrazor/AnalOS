# AnalOS Windows Sign & Package Configuration
#
# This config signs and packages an already-built Windows application.
# Use this when you have a pre-built app and only need to sign/package it.
#
# Expects: out/Default/chrome.exe and mini_installer.exe
#
# Environment Variables:
#   Use !env tag to reference environment variables:
#     Example: certificate_name: !env WINDOWS_CERTIFICATE_NAME

build:
  type: release
  architecture: x64  # Windows x64

gn_flags:
  file: build/config/gn/flags.windows.release.gn

# Explicit module execution order (partial pipeline - sign & package only)
modules:
  - sign_windows
  - package_windows

# Required environment variables
# Note: CHROMIUM_SRC can be provided via --chromium-src CLI flag, YAML config, or env var
# Note: GCS_BUCKET defaults to 'nxtscape' if not set
required_envs:
  - CODE_SIGN_TOOL_PATH         # Path to CodeSignTool directory
  - ESIGNER_USERNAME            # SSL.com eSigner username
  - ESIGNER_PASSWORD            # SSL.com eSigner password
  - ESIGNER_TOTP_SECRET         # SSL.com eSigner TOTP secret

# Notification settings
notifications:
  slack: true  # Enable Slack notifications for signing operations
